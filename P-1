#include <stdio.h>
#include <stdlib.h>

#define MAX_READINGS 5   

struct Node {
    int temperature;
    struct Node *next;
};

struct Node *head = NULL;
int count = 0;

void insertReading(int temp) {
    struct Node *newNode = (struct Node *)malloc(sizeof(struct Node));

    if (newNode == NULL) {
        printf("Memory allocation failed!\n");
        return;
    }

    newNode->temperature = temp;
    newNode->next = NULL;

    if (count == MAX_READINGS) {
        struct Node *tempNode = head;
        head = head->next;
        free(tempNode);
        count--;
        printf("Old reading deleted (Memory Full)\n");
    }

    // Insert at end
    if (head == NULL) {
        head = newNode;
    } else {
        struct Node *tempNode = head;
        while (tempNode->next != NULL)
            tempNode = tempNode->next;
        tempNode->next = newNode;
    }

    count++;
    printf("Inserted temperature: %d째C\n", temp);
}

void searchReading(int temp) {
    struct Node *tempNode = head;
    int position = 1;

    while (tempNode != NULL) {
        if (tempNode->temperature == temp) {
            printf("Temperature %d째C found at position %d\n", temp, position);
            return;
        }
        tempNode = tempNode->next;
        position++;
    }
    printf("Temperature %d째C not found\n", temp);
}

void printReadings() {
    struct Node *tempNode = head;

    if (head == NULL) {
        printf("No temperature data available\n");
        return;
    }

    printf("Temperature Readings: ");
    while (tempNode != NULL) {
        printf("%d째C -> ", tempNode->temperature);
        tempNode = tempNode->next;
    }
    printf("NULL\n");
}

int main() {
    
    insertReading(25);
    insertReading(26);
    insertReading(27);
    insertReading(28);
    insertReading(29);

    insertReading(30);

    printReadings();

    searchReading(27);
    searchReading(25);

    return 0;
}
